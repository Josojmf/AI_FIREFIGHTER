# FirefighterAI Production Environment Configuration
# ====================================================
# 
# This file serves as a template for production environment variables.
# Copy this file and fill in the actual values for your deployment.
# 
# SECURITY WARNING: Never commit actual secrets to version control!

# ============================================
# Database Configuration
# ============================================
# MongoDB Atlas connection string
# Format: mongodb+srv://<username>:<password>@<cluster>.mongodb.net/<database>?retryWrites=true&w=majority
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/firefighter?retryWrites=true&w=majority

# Database name (optional, usually specified in URI)
DB_NAME=firefighter

# ============================================
# Authentication & Security
# ============================================
# JWT Secret Key - MUST be a strong random string (min 32 characters)
# Generate with: openssl rand -hex 32
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-in-production

# Session Secret Key for Frontend (MUST be different from JWT_SECRET_KEY)
# Generate with: openssl rand -hex 32
SESSION_SECRET_KEY=your-super-secret-session-key-change-this-in-production

# BackOffice Session Secret (MUST be different from both above)
# Generate with: openssl rand -hex 32
BO_SESSION_SECRET=your-super-secret-backoffice-session-key-change-this

# Session Configuration
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Lax
SESSION_LIFETIME_MINUTES=1440  # 24 hours

# JWT Configuration
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRES=30  # minutes
JWT_REFRESH_TOKEN_EXPIRES=10080  # 7 days in minutes

# ============================================
# Email Service (SendGrid)
# ============================================
# SendGrid API Key - Get from https://app.sendgrid.com/settings/api_keys
# Format: SG.xxxxxxxxxxxxxxxxxxxxxx
SENDGRID_API_KEY=SG.your-sendgrid-api-key

# Email sender configuration
SENDGRID_FROM_EMAIL=noreply@firefighterai.com
SENDGRID_FROM_NAME=FirefighterAI

# Email templates
EMAIL_VERIFICATION_TEMPLATE_ID=d-xxxxxxxxxxxxxxxxxxxxxxxx
PASSWORD_RESET_TEMPLATE_ID=d-xxxxxxxxxxxxxxxxxxxxxxxx

# ============================================
# AI Service (Anthropic Claude)
# ============================================
# Anthropic API Key - Get from https://console.anthropic.com/
# Format: sk-ant-xxxxx
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key

# Claude configuration
ANTHROPIC_MODEL=claude-sonnet-4-20250514
ANTHROPIC_MAX_TOKENS=4096
ANTHROPIC_TEMPERATURE=0.7

# ============================================
# Application URLs
# ============================================
# These are used for CORS, redirects, and email links

# Frontend URL (user-facing application)
FRONTEND_URL=https://app.firefighterai.com
FRONTEND_PORT=8000

# API URL (backend API)
API_URL=https://api.firefighterai.com
API_PORT=5000

# BackOffice URL (admin panel)
BO_URL=https://admin.firefighterai.com
BO_PORT=3001

# Internal Docker network URLs (for service-to-service communication)
INTERNAL_API_URL=http://firefighter-api:5000
INTERNAL_FRONTEND_URL=http://firefighter-frontend:8000
INTERNAL_BO_URL=http://firefighter-backoffice:3001

# ============================================
# Docker Configuration
# ============================================
# Docker registry
REGISTRY=ghcr.io
IMAGE_PREFIX=yourusername/firefighter

# Image tag (automatically set by CI/CD)
IMAGE_TAG=latest

# ============================================
# Redis Cache (Optional but Recommended)
# ============================================
# Redis connection URL
# Format: redis://[:password@]host[:port][/database]
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=your-redis-password-if-needed

# Redis configuration
REDIS_TTL_SESSIONS=3600  # 1 hour
REDIS_TTL_CACHE=1800     # 30 minutes
REDIS_TTL_LEITNER=86400  # 24 hours

# ============================================
# Server Configuration
# ============================================
# Digital Ocean server
DIGITALOCEAN_HOST=your.server.ip.address
DIGITALOCEAN_SSH_KEY=your-private-ssh-key-content

# Server ports
HTTP_PORT=80
HTTPS_PORT=443

# ============================================
# Logging & Monitoring
# ============================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Sentry DSN for error tracking (optional)
SENTRY_DSN=https://xxxxx@sentry.io/xxxxx
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# ============================================
# Application Settings
# ============================================
# Environment
ENVIRONMENT=production
DEBUG=false

# Flask configuration
FLASK_ENV=production
FLASK_DEBUG=false
FLASK_SECRET_KEY=your-flask-secret-key

# CORS allowed origins (comma-separated)
CORS_ORIGINS=https://app.firefighterai.com,https://admin.firefighterai.com

# File upload limits
MAX_CONTENT_LENGTH=16777216  # 16MB in bytes
ALLOWED_EXTENSIONS=pdf,jpg,jpeg,png,gif

# ============================================
# Rate Limiting
# ============================================
RATELIMIT_ENABLED=true
RATELIMIT_STORAGE_URL=redis://localhost:6379/1
RATELIMIT_DEFAULT=100 per hour
RATELIMIT_LOGIN=5 per minute
RATELIMIT_API=1000 per hour

# ============================================
# Leitner System Configuration
# ============================================
LEITNER_BOX_INTERVALS=1,3,7,14,30  # days between reviews
LEITNER_MAX_DAILY_CARDS=50
LEITNER_SUCCESS_THRESHOLD=0.8

# ============================================
# Feature Flags
# ============================================
FEATURE_MFA_ENABLED=true
FEATURE_EMAIL_VERIFICATION=true
FEATURE_REDIS_CACHE=true
FEATURE_RATE_LIMITING=true
FEATURE_SENTRY=false

# ============================================
# Backup Configuration
# ============================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=firefighter-backups

# ============================================
# Health Check Configuration
# ============================================
HEALTHCHECK_INTERVAL=300  # 5 minutes in seconds
HEALTHCHECK_TIMEOUT=10
HEALTHCHECK_RETRIES=3

# ============================================
# Deployment Metadata (Auto-populated by CI/CD)
# ============================================
DEPLOYMENT_ID=
COMMIT_SHA=
DEPLOYED_AT=
DEPLOYED_BY=