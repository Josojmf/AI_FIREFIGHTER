# ğŸ”´ Redis Configuration para FirefighterAI
# Optimizada para cache de sesiones, progreso Leitner y performance

# ğŸŒ Network
bind 0.0.0.0
port 6379
protected-mode no

# ğŸ’¾ Memory management
maxmemory 512mb
maxmemory-policy allkeys-lru

# ğŸ“ Persistence para desarrollo (conservar cache entre reinicios)
save 900 1
save 300 10
save 60 10000

# AOF para mayor durabilidad en producciÃ³n
appendonly yes
appendfilename "appendonly.aof"
appendfsync everysec
no-appendfsync-on-rewrite no
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# ğŸš€ Performance tuning
tcp-keepalive 300
timeout 300
tcp-backlog 511

# ğŸ“Š Logging (para debugging en desarrollo)
loglevel notice
logfile "/data/redis.log"

# ğŸ”§ Advanced settings
databases 16
stop-writes-on-bgsave-error yes
rdbcompression yes
rdbchecksum yes
dir /data

# ğŸ¯ Settings especÃ­ficos para FirefighterAI
# Database 0: Sessions (TTL automÃ¡tico)
# Database 1: Leitner progress cache
# Database 2: Chat history cache
# Database 3: User preferences cache

# ğŸ“ˆ Slow log para monitoring
slowlog-log-slower-than 10000
slowlog-max-len 128

# ğŸ›¡ï¸ Security (bÃ¡sica para desarrollo)
# requirepass tu_password_aqui  # Descomenta en producciÃ³n

# ğŸ“Š Stats para monitoring
latency-monitor-threshold 100

# ğŸ”„ Client settings
client-output-buffer-limit normal 0 0 0
client-output-buffer-limit replica 256mb 64mb 60
client-output-buffer-limit pubsub 32mb 8mb 60

# ğŸ¯ Redis especÃ­fico para cache patterns
hash-max-ziplist-entries 512
hash-max-ziplist-value 64
list-max-ziplist-size -2
set-max-intset-entries 512
zset-max-ziplist-entries 128
zset-max-ziplist-value 64