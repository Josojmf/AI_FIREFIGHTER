{% extends "layout.html" %}
{% block title %}OnFire Academy (embebido){% endblock %}

{% block content %}
<section class="embed-shell">
  <header class="embed-head">
    <h1 class="embed-title">OnFire Academy — Vista embebida</h1>
    <p class="muted">Contenido cargado vía proxy del lado servidor (JS de terceros deshabilitado).</p>
    <div class="embed-actions">
      <a class="btn btn-primary" href="https://www.onfireacademy.es/" target="_blank" rel="noopener noreferrer">
        Abrir sitio original
      </a>
      <button id="reloadBtn" class="btn">Recargar</button>
    </div>
  </header>

  <div class="embed-frame-wrap">
    <iframe
      id="onfireFrame"
      class="embed-frame"
      src="{{ proxied_url }}"
      sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox"
      referrerpolicy="no-referrer"
    ></iframe>
  </div>
</section>
{% endblock %}

{% block scripts %}
<style>
.embed-shell{ padding: clamp(72px,10vh,120px) 1rem 1.5rem; min-height:100vh; }
.embed-head{ width:min(1200px,100%); margin:0 auto 1rem; display:flex; flex-wrap:wrap; gap:.75rem; align-items:center; justify-content:space-between; }
.embed-title{ margin:.25rem 0; font-size: clamp(1.2rem, 3vw, 1.6rem); }
.embed-actions{ display:flex; gap:.5rem; align-items:center; }
.btn{ display:inline-flex; align-items:center; gap:.4rem; padding:.55rem .85rem; border-radius:12px; border:1px solid rgba(255,255,255,.12); background: rgba(255,255,255,.05); cursor:pointer; }
.btn:hover{ background: rgba(255,255,255,.08); }
.btn-primary{ background: var(--gradient-fire); border-color: rgba(251,191,36,.45); color:#fff; }
.embed-frame-wrap{ width:min(1200px,100%); height: calc(100vh - 210px); margin:0 auto; border:1px solid rgba(255,255,255,.12); border-radius:16px; overflow:hidden; background: var(--bg-secondary); }
.embed-frame{ width:100%; height:100%; border:0; display:block; }
.muted{ color: var(--text-secondary); }
</style>
<script>
  document.getElementById('reloadBtn')?.addEventListener('click', () => {
    const frame = document.getElementById('onfireFrame');
    frame.src = frame.src;
  });
</script>
{% endblock %}
